{% extends 'base.html' %}
{% block content %}
<style>
  .small-card h6 { font-size: 0.9rem; }
  .small-card p { font-size: 1.1rem; }
</style>

<div class="container py-5">
  <h2 class="mb-4">Общая статистика</h2>

  <div class="row g-3 mb-4">
    <div class="col-6 col-md-3">
      <div class="card text-white bg-primary small-card">
        <div class="card-body p-3">
          <h6 class="mb-1">Ожидают согласования</h6>
          <p class="fs-5 mb-0">{{ documents_pending }}</p>
        </div>
      </div>
    </div>
    <div class="col-6 col-md-3">
      <div class="card text-white bg-danger small-card">
        <div class="card-body p-3">
          <h6 class="mb-1">Возвращены на доработку</h6>
          <p class="fs-5 mb-0">{{ documents_returned }}</p>
        </div>
      </div>
    </div>
    <div class="col-6 col-md-3">
      <div class="card text-white bg-success small-card">
        <div class="card-body p-3">
          <h6 class="mb-1">Поступили на согласование</h6>
          <p class="fs-5 mb-0">{{ documents_incoming }}</p>
        </div>
      </div>
    </div>
  </div>

  <h4 class="mt-5 mb-3">Поручения</h4>
  <div class="row g-3">
    <div class="col-md-6">
      <div class="card shadow-sm">
        <div class="card-header bg-primary text-white">Мои поручения</div>
        <div class="card-body p-3">
          <ul class="list-unstyled mb-0">
            <li>Срок 1-3 дня: <strong>{{ my_tasks.1_3 }}</strong></li>
            <li>Срок на этой неделе: <strong>{{ my_tasks.week }}</strong></li>
            <li>Срок &gt; недели: <strong>{{ my_tasks.late }}</strong></li>
            <li>Всего: <strong>{{ my_tasks.total }}</strong></li>
          </ul>
        </div>
      </div>
    </div>

    {% if is_leader %}
    <div class="col-md-6">
      <div class="card shadow-sm">
        <div class="card-header bg-warning text-dark">Назначенные поручения</div>
        <div class="card-body p-3">
          <ul class="list-unstyled mb-0">
            <li>Срок 1-3 дня: <strong>{{ assigned_tasks.1_3 }}</strong></li>
            <li>Срок на этой неделе: <strong>{{ assigned_tasks.week }}</strong></li>
            <li>Срок &gt; недели: <strong>{{ assigned_tasks.late }}</strong></li>
            <li>Всего: <strong>{{ assigned_tasks.total }}</strong></li>
          </ul>
        </div>
      </div>
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}
